<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>I AM ROOT</title>
    <link rel="icon" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Open Sans', sans-serif;
        max-width: 60em;
        margin: 0 auto;
        min-height: 100%;
        background-color: #1a1b26;
      }
      .container {
        text-align: justify;
        line-height: 2;
        font-size: 1.2rem;
        padding: 1em;
        color: #eee8d5;
        margin-bottom: 100px;
      }
      #header {
        background-color: #1a1b26;
        position: sticky;
        top: 0;
        color: #cb4b16;
      }
      #footer {
        position: fixed;
        padding: 10px 10px 0px 10px;
        bottom: 0;
        height: 40px;
        max-width: 60em;
        width: 100%;
        background: #1a1b26;
        color: #eee8d5;
      }
      a {
        font-size: 1.5rem;
        color: #b58900;
        padding: 0% 5%;
        text-decoration: none;
      }
      b {
        color: orange;
      }
      pre {
        padding: 1rem;
        overflow-x: hidden;
      }
      // The line numbers already provide some kind of left/right padding
      pre[data-linenos] {
        padding: 1rem 0;
      }
      pre table td {
        padding: 0;
      }
      // The line number cells
      pre table td:nth-of-type(1) {
        text-align: center;
        user-select: none;
      }
      pre mark {
        // If you want your highlights to take the full width.
        display: block;
        // The default background colour of a mark is bright yellow
        background-color: rgba(254, 252, 232, 0.9);
      }
      pre table {
        width: 100%;
        border-collapse: collapse;
      }
    </style>
  </head>

  <body>
    <div id="header">
      <h1>üôçPavan Bhat</h1>
      <nav>
        <a href="/">HOME</a>
        <a href="/blogs">BLOG</a>
        <a href="/projects">PROJECTS</a>
        <a href="/cheats">CHEATS</a>
        <a href="/links">CONTACT</a>
      </nav>
      <hr />
    </div>
    <section class="section">
      <div class="container">
<h1 class="title">
  Shell script for battery Notification
</h1>
<p class="subtitle"><strong>2022-01-04</strong></p>
<h1 id="dependencies">Dependencies</h1>
<p>These are the application you need in Arch Linux. You can try with same applications in any other distro as well</p>
<ul>
<li>
<p>Cron</p>
<pre style="background-color:#282a36;color:#f8f8f2;"><code><span>sudo pacman -S cronie
</span></code></pre>
</li>
<li>
<p>Dunst</p>
<pre style="background-color:#282a36;color:#f8f8f2;"><code><span>sudo pacman -S dunst
</span></code></pre>
</li>
</ul>
<h1 id="process">Process</h1>
<h2 id="step-1-bash-script">Step 1 : Bash script</h2>
<p><a href="https://github.com/pavanbhat1999/bin/blob/master/scripts/battery_notification.sh">Download from Github</a></p>
<pre data-lang="bash" style="background-color:#282a36;color:#f8f8f2;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#6272a4;">#!/usr/bin/bash
</span><span style="color:#ffffff;">STATUS</span><span style="color:#ff79c6;">=</span><span style="color:#f1fa8c;">$(</span><span style="color:#50fa7b;">cat</span><span style="color:#f1fa8c;"> /sys/class/power_supply/BAT0/status)
</span><span style="color:#ffffff;">CURRENT_BAT</span><span style="color:#ff79c6;">=</span><span style="color:#f1fa8c;">$(</span><span style="color:#50fa7b;">cat</span><span style="color:#f1fa8c;"> /sys/class/power_supply/BAT0/capacity)
</span><span style="color:#ffffff;">UPPER_LIMIT</span><span style="color:#ff79c6;">=</span><span style="color:#f1fa8c;">60
</span><span style="color:#ffffff;">LOWER_LIMIT</span><span style="color:#ff79c6;">=</span><span style="color:#f1fa8c;">30
</span><span style="color:#ff79c6;">if </span><span style="color:#8be9fd;">[ </span><span style="color:#f1fa8c;">&quot;$</span><span style="color:#ffffff;">STATUS</span><span style="color:#f1fa8c;">&quot; </span><span style="color:#ff79c6;">= </span><span style="color:#f1fa8c;">&quot;Charging&quot; </span><span style="color:#8be9fd;">]</span><span style="color:#ff79c6;">; then
</span><span>    </span><span style="color:#8be9fd;">echo </span><span style="color:#f1fa8c;">&#39;Charging&#39;
</span><span>    </span><span style="color:#ff79c6;">if </span><span style="color:#8be9fd;">[ </span><span>$</span><span style="color:#ffffff;">CURRENT_BAT </span><span style="font-style:italic;color:#ffb86c;">-gt </span><span>$</span><span style="color:#ffffff;">UPPER_LIMIT </span><span style="color:#8be9fd;">]
</span><span>    </span><span style="color:#ff79c6;">then
</span><span>        </span><span style="color:#50fa7b;">notify-send </span><span style="color:#f1fa8c;">&quot;Above limit Please Unplug the Charger&quot;</span><span style="font-style:italic;color:#ffb86c;"> -u</span><span> critical
</span><span>    </span><span style="color:#ff79c6;">fi
</span><span style="color:#ff79c6;">else
</span><span>    </span><span style="color:#8be9fd;">echo </span><span style="color:#f1fa8c;">&quot;Not Charging&quot;
</span><span>    </span><span style="color:#ff79c6;">if </span><span style="color:#8be9fd;">[ </span><span>$</span><span style="color:#ffffff;">CURRENT_BAT </span><span style="font-style:italic;color:#ffb86c;">-gt </span><span>$</span><span style="color:#ffffff;">LOWER_LIMIT </span><span style="color:#8be9fd;">]
</span><span>    </span><span style="color:#ff79c6;">then
</span><span>        </span><span style="color:#8be9fd;">echo </span><span style="color:#f1fa8c;">&#39;Optimum Charge&#39;
</span><span>    </span><span style="color:#ff79c6;">fi
</span><span>    </span><span style="color:#ff79c6;">if </span><span style="color:#8be9fd;">[ </span><span>$</span><span style="color:#ffffff;">CURRENT_BAT </span><span style="font-style:italic;color:#ffb86c;">-lt </span><span>$</span><span style="color:#ffffff;">LOWER_LIMIT </span><span style="color:#8be9fd;">]
</span><span>    </span><span style="color:#ff79c6;">then
</span><span>        </span><span style="color:#50fa7b;">notify-send </span><span style="color:#f1fa8c;">&quot;Gone below Lower Limit. Charge Me Please&quot;</span><span style="font-style:italic;color:#ffb86c;"> -u</span><span> critical
</span><span>    </span><span style="color:#ff79c6;">fi
</span><span style="color:#ff79c6;">fi
</span><span>
</span></code></pre>
<h2 id="step-2-dunsrc-for-sound">Step 2 : Dunsrc for sound</h2>
<p><a href="aaa">Download from Github</a></p>
<pre data-lang="bash" style="background-color:#282a36;color:#f8f8f2;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#50fa7b;">[global]
</span><span style="color:#50fa7b;">monitor</span><span> = 0
</span><span style="color:#50fa7b;">follow</span><span> = mouse
</span><span style="color:#50fa7b;">geometry</span><span> = </span><span style="color:#f1fa8c;">&quot;1000x1000-20+48&quot;
</span><span style="color:#50fa7b;">indicate_hidden</span><span> = yes
</span><span style="color:#50fa7b;">shrink</span><span> = no
</span><span style="color:#50fa7b;">separator_height</span><span> = 0
</span><span style="color:#50fa7b;">padding</span><span> = 32
</span><span style="color:#50fa7b;">horizontal_padding</span><span> = 32
</span><span style="color:#50fa7b;">frame_width</span><span> = 2
</span><span style="color:#50fa7b;">sort</span><span> = no
</span><span style="color:#50fa7b;">idle_threshold</span><span> = 120
</span><span style="color:#50fa7b;">font</span><span> = Fira Code 14
</span><span style="color:#50fa7b;">line_height</span><span> = 4
</span><span style="color:#50fa7b;">markup</span><span> = full
</span><span style="color:#50fa7b;">format</span><span> = %</span><span style="color:#ffffff;">s</span><span style="color:#ff79c6;">\n</span><span>%</span><span style="color:#ffffff;">b
</span><span style="color:#50fa7b;">alignment</span><span> = center
</span><span style="color:#50fa7b;">show_age_threshold</span><span> = 60
</span><span style="color:#50fa7b;">word_wrap</span><span> = yes
</span><span style="color:#50fa7b;">ignore_newline</span><span> = no
</span><span style="color:#50fa7b;">stack_duplicates</span><span> = false
</span><span style="color:#50fa7b;">hide_duplicate_count</span><span> = yes
</span><span style="color:#50fa7b;">show_indicators</span><span> = no
</span><span style="color:#50fa7b;">icon_position</span><span> = off
</span><span style="color:#50fa7b;">sticky_history</span><span> = yes
</span><span style="color:#50fa7b;">history_length</span><span> = 20
</span><span style="color:#50fa7b;">browser</span><span> = /usr/bin/brave
</span><span style="color:#50fa7b;">always_run_script</span><span> = true
</span><span style="color:#50fa7b;">title</span><span> = Dunst
</span><span style="color:#50fa7b;">class</span><span> = Dunst
</span><span style="color:#50fa7b;">mouse_middle_click</span><span> = do_action
</span><span style="color:#50fa7b;">[shortcuts]
</span><span style="color:#50fa7b;">close</span><span> = ctrl+space
</span><span style="color:#50fa7b;">close_all</span><span> = ctrl+shift+space
</span><span style="color:#50fa7b;">history</span><span> = ctrl+grave
</span><span style="color:#50fa7b;">context</span><span> = ctrl+shift+period
</span><span>
</span><span style="color:#50fa7b;">[urgency_low]
</span><span style="color:#50fa7b;">timeout</span><span> = 4
</span><span style="color:#50fa7b;">background</span><span> = </span><span style="color:#f1fa8c;">&quot;#141c21&quot;
</span><span style="color:#50fa7b;">foreground</span><span> = </span><span style="color:#f1fa8c;">&quot;#93a1a1&quot;
</span><span style="color:#50fa7b;">frame_color</span><span> = </span><span style="color:#f1fa8c;">&quot;#8bc34a&quot;
</span><span>
</span><span style="color:#50fa7b;">[urgency_normal]
</span><span style="color:#50fa7b;">timeout</span><span> = 8
</span><span style="color:#50fa7b;">background</span><span> = </span><span style="color:#f1fa8c;">&quot;#141c21&quot;
</span><span style="color:#50fa7b;">foreground</span><span> = </span><span style="color:#f1fa8c;">&quot;#93a1a1&quot;
</span><span style="color:#50fa7b;">frame_color</span><span> = </span><span style="color:#f1fa8c;">&quot;#ba68c8&quot;
</span><span>
</span><span style="color:#50fa7b;">[urgency_critical]
</span><span style="color:#50fa7b;">timeout</span><span> = 5
</span><span style="color:#50fa7b;">background</span><span> = </span><span style="color:#f1fa8c;">&quot;#B10F29&quot;
</span><span style="color:#50fa7b;">foreground</span><span> = </span><span style="color:#f1fa8c;">&quot;#93a1a1&quot;
</span><span style="color:#50fa7b;">frame_color</span><span> = </span><span style="color:#f1fa8c;">&quot;#ff7043&quot;
</span><span style="color:#50fa7b;">[play_sound]
</span><span>    </span><span style="color:#ffffff;">summary</span><span style="color:#ff79c6;">=</span><span style="color:#f1fa8c;">&quot;*&quot;
</span><span>    </span><span style="color:#6272a4;"># sound file which you want
</span><span>    </span><span style="color:#ffffff;">script</span><span style="color:#ff79c6;">= </span><span style="color:#50fa7b;">paplay</span><span> sound.ogg
</span></code></pre>
<h2 id="step-3-add-cron">Step 3 : Add Cron</h2>
<p>After installing cron and enabling it run the following command</p>
<pre style="background-color:#282a36;color:#f8f8f2;"><code><span>crontab -e
</span></code></pre>
<p>Then add these lines of code</p>
<pre style="background-color:#282a36;color:#f8f8f2;"><code><span>* * * * *  XDG_RUNTIME_DIR=/run/user/$(id -u) sh battery_notification.sh
</span></code></pre>

</div>
    </section>
    <footer id="footer">
      <span> Made by <b>üß† Pavan Bhat ¬©</b> All rights reserved 2021 </span>
    </footer>
  </body>
</html>
